{"version":3,"sources":["../../../../src/modal/bs-modal-ref.service.ts","../../../../src/modal/modal-backdrop.options.ts","../../../../src/modal/modal-options.class.ts","../../../../src/modal/modal-container.component.ts","../../../../src/modal/modal-backdrop.component.ts","../../../../src/modal/modal.directive.ts","../../../tslib/tslib.es6.js","../../../../src/modal/bs-modal.service.ts","../../../../src/modal/modal.module.ts"],"names":["this","hide","setClass","Injectable","options","animate","Object","assign","modalConfigDefaults","backdrop","keyboard","focus","show","ignoreBackdropClick","class","animated","initialState","closeInterceptor","MODAL_CONFIG_DEFAULT_OVERRIDE","InjectionToken","CLASS_NAME","SCROLLBAR_MEASURER","BACKDROP","OPEN","FADE","IN","SHOW","TRANSITION_DURATIONS","DISMISS_REASONS","ModalContainerComponent","_element","_renderer","isShown","isAnimated","isModalHiding","clickStartedInContent","config","prototype","ngOnInit","_this","addClass","nativeElement","setStyle","setTimeout","isBs3","document","body","bsModalService","getModalsCount","checkScrollbar","setScrollbar","onClickStarted","event","target","onClickStop","clickedInBackdrop","_a","setDismissReason","onPopState","onEsc","keyCode","key","preventDefault","level","_b","ngOnDestroy","_hide","then","removeClass","id","Component","args","selector","template","host","role","tabindex","ModalOptions","ElementRef","Renderer2","HostListener","ModalBackdropComponent","element","renderer","_isAnimated","_isShown","defineProperty","value","Utils","reflow","ModalDirective","_viewContainerRef","clf","modalDefaultOption","onShow","EventEmitter","onShown","onHide","onHidden","isBodyOverflowing","originalBodyPadding","scrollbarWidth","timerHideModal","timerRmBackDrop","isNested","_backdrop","createLoader","_config","conf","getConfig","dismissReason","hideModal","dispose","toggle","emit","clearTimeout","classList","contains","showBackdrop","showElement","window","parentNode","nodeType","Node","ELEMENT_NODE","appendChild","setAttribute","setProperty","transitionComplete","resetScrollbar","resetAdjustments","focusOtherModal","callback","instance","callbackRemove","removeBackdrop","attach","to","_componentRef","parentElement","otherOpenedModals","querySelectorAll","length","clientWidth","innerWidth","getScrollbarWidth","parseInt","getComputedStyle","getPropertyValue","style","paddingRight","scrollDiv","createElement","offsetWidth","removeChild","Directive","exportAs","ViewContainerRef","ComponentLoaderFactory","decorators","type","Optional","Inject","Input","Output","create","__values","o","s","Symbol","iterator","m","i","call","next","done","TypeError","BsModalService","rendererFactory","modalsCount","loaders","_backdropLoader","createRenderer","content","_createLoaders","Date","getUTCMilliseconds","_showBackdrop","lastDismissReason","_showModal","_hideBackdrop","_hideModal","removeLoaders","isBackdropEnabled","isBackdropInDOM","backdropRef","duration","modalLoader","providers","_c","_d","provider","provide","bsModalRef","BsModalRef","modalContainerRef","useValue","newClass","copyEvent","onBeforeHide","getInnerComponent","indexToRemove","findIndex","loader","forEach","reason","onBeforeShow","push","splice","from","subscribe","data","RendererFactory2","FocusTrapModule","forRoot","ModalModule","ngModule","PositioningService","forChild","NgModule","imports","declarations","exports","entryComponents"],"mappings":"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","sourcesContent":["import { Injectable, EventEmitter } from '@angular/core';\n\n@Injectable()\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport class BsModalRef<T = any> {\n  /**\n   * Event that is fired when the modal behind the ref starts hiding\n   */\n  onHide?: EventEmitter<unknown>;\n  /**\n   * Event that is fired when the modal behind the ref finishes hiding\n   */\n  onHidden?: EventEmitter<unknown>;\n  /**\n   *  Allow user to ID for the modal. Otherwise, a unique number will be given\n   */\n  id?: number | string;\n\n  /**\n   * Reference to a component inside the modal. Null if modal's been created with TemplateRef\n   */\n  content?: T;\n\n  /**\n   * Hides the modal\n   */\n  hide: () => void = () => void 0;\n  /**\n   * Sets new class to modal window\n   */\n  setClass: (newClass: string) => void = () => void 0;\n}\n","export class ModalBackdropOptions {\n  animate = true;\n\n  constructor(options: ModalBackdropOptions) {\n    Object.assign(this, options);\n  }\n}\n","import { Injectable, StaticProvider, InjectionToken } from '@angular/core';\nimport { ClassName, CloseInterceptorFn, DismissReasons, Selector, TransitionDurations } from './models';\n\n@Injectable()\nexport class ModalOptions<T = Record<string, unknown>> {\n  /**\n   *  Allow user to ID for the modal. Otherwise, a unique number will be given\n   */\n  id?: number | string;\n  /**\n   *  Includes a modal-backdrop element. Alternatively,\n   *  specify static for a backdrop which doesn't close the modal on click.\n   */\n  backdrop?: boolean | 'static';\n  /**\n   * Closes the modal when escape key is pressed.\n   */\n  keyboard?: boolean;\n\n  focus?: boolean;\n  /**\n   * Shows the modal when initialized.\n   */\n  show?: boolean;\n  /**\n   * Ignore the backdrop click\n   */\n  ignoreBackdropClick?: boolean;\n  /**\n   * Css class for opened modal\n   */\n  class?: string;\n  /**\n   * Toggle animation\n   */\n  animated?: boolean;\n  /**\n   * Modal data\n   */\n  initialState?: Partial<T>;\n  /**\n   * Function to intercept the closure\n   */\n  closeInterceptor?: CloseInterceptorFn;\n  /**\n   * Modal providers\n   */\n  providers?: StaticProvider[];\n  /**\n   * aria-labelledby attribute value to set on the modal window\n   */\n  ariaLabelledBy?: string;\n  /**\n   * aria-describedby attribute value to set on the modal window\n   */\n  ariaDescribedby?: string;\n}\n\nexport const modalConfigDefaults: ModalOptions = {\n  backdrop: true,\n  keyboard: true,\n  focus: true,\n  show: false,\n  ignoreBackdropClick: false,\n  class: '',\n  animated: true,\n  initialState: {},\n  closeInterceptor: void 0\n};\n\nexport const MODAL_CONFIG_DEFAULT_OVERRIDE: InjectionToken<ModalOptions> =\n  new InjectionToken<ModalOptions>('override-default-config');\n\nexport const CLASS_NAME: ClassName = {\n  SCROLLBAR_MEASURER: 'modal-scrollbar-measure',\n  BACKDROP: 'modal-backdrop',\n  OPEN: 'modal-open',\n  FADE: 'fade',\n  IN: 'in', // bs3\n  SHOW: 'show' // bs4\n};\n\nexport const SELECTOR: Selector = {\n  DIALOG: '.modal-dialog',\n  DATA_TOGGLE: '[data-toggle=\"modal\"]',\n  DATA_DISMISS: '[data-dismiss=\"modal\"]',\n  FIXED_CONTENT: '.navbar-fixed-top, .navbar-fixed-bottom, .is-fixed'\n};\n\nexport const TRANSITION_DURATIONS: TransitionDurations = {\n  MODAL: 300,\n  BACKDROP: 150\n};\n\nexport const DISMISS_REASONS: DismissReasons = {\n  BACKRDOP: 'backdrop-click',\n  ESC: 'esc',\n  BACK: 'browser-back-navigation-clicked'\n};\n","import {\n  Component,\n  ElementRef,\n  HostListener,\n  OnDestroy,\n  OnInit,\n  Renderer2\n} from '@angular/core';\nimport {\n  CLASS_NAME,\n  DISMISS_REASONS,\n  ModalOptions,\n  TRANSITION_DURATIONS\n} from './modal-options.class';\nimport { BsModalService } from './bs-modal.service';\nimport { isBs3 } from 'ngx-bootstrap/utils';\n\n@Component({\n  selector: 'modal-container',\n  template: `\n    <div [class]=\"'modal-dialog' + (config.class ? ' ' + config.class : '')\"\n         role=\"document\"\n         focusTrap>\n      <div class=\"modal-content\">\n        <ng-content></ng-content>\n      </div>\n    </div>\n  `,\n  // eslint-disable-next-line @angular-eslint/no-host-metadata-property\n  host: {\n    class: 'modal',\n    role: 'dialog',\n    tabindex: '-1',\n    '[attr.aria-modal]': 'true',\n    '[attr.aria-labelledby]': 'config.ariaLabelledBy',\n    '[attr.aria-describedby]': 'config.ariaDescribedby'\n  }\n})\nexport class ModalContainerComponent implements OnInit, OnDestroy {\n  config: ModalOptions;\n  isShown = false;\n  level?: number;\n  isAnimated = false;\n  bsModalService?: BsModalService;\n  private isModalHiding = false;\n  private clickStartedInContent = false;\n\n  constructor(options: ModalOptions,\n              protected _element: ElementRef,\n              private _renderer: Renderer2) {\n    this.config = Object.assign({}, options);\n  }\n\n  ngOnInit(): void {\n    if (this.isAnimated) {\n      this._renderer.addClass(\n        this._element.nativeElement,\n        CLASS_NAME.FADE\n      );\n    }\n    this._renderer.setStyle(\n      this._element.nativeElement,\n      'display',\n      'block'\n    );\n    setTimeout(() => {\n      this.isShown = true;\n      this._renderer.addClass(\n        this._element.nativeElement,\n        isBs3() ? CLASS_NAME.IN : CLASS_NAME.SHOW\n      );\n    }, this.isAnimated ? TRANSITION_DURATIONS.BACKDROP : 0);\n    if (document && document.body) {\n      if (this.bsModalService && this.bsModalService.getModalsCount() === 1) {\n        this.bsModalService.checkScrollbar();\n        this.bsModalService.setScrollbar();\n      }\n      this._renderer.addClass(document.body, CLASS_NAME.OPEN);\n      this._renderer.setStyle(document.body, 'overflow-y', 'hidden');\n    }\n    if (this._element.nativeElement) {\n      this._element.nativeElement.focus();\n    }\n  }\n\n  @HostListener('mousedown', ['$event'])\n  onClickStarted(event: MouseEvent): void {\n    this.clickStartedInContent = event.target !== this._element.nativeElement;\n  }\n\n  @HostListener('click', ['$event'])\n  onClickStop(event: MouseEvent): void {\n    const clickedInBackdrop = event.target === this._element.nativeElement && !this.clickStartedInContent;\n    if (\n      this.config.ignoreBackdropClick ||\n      this.config.backdrop === 'static' ||\n      !clickedInBackdrop\n    ) {\n      this.clickStartedInContent = false;\n\n      return;\n    }\n    this.bsModalService?.setDismissReason(DISMISS_REASONS.BACKRDOP);\n    this.hide();\n  }\n\n  @HostListener('window:popstate')\n  onPopState(): void {\n    this.bsModalService?.setDismissReason(DISMISS_REASONS.BACK);\n    this.hide();\n  }\n\n  @HostListener('window:keydown.esc', ['$event'])\n  onEsc(event: KeyboardEvent): void {\n    if (!this.isShown) {\n      return;\n    }\n\n    if (event.keyCode === 27 || event.key === 'Escape') {\n      event.preventDefault();\n    }\n\n    if (\n      this.config.keyboard &&\n      this.level === this.bsModalService?.getModalsCount()\n    ) {\n      this.bsModalService?.setDismissReason(DISMISS_REASONS.ESC);\n      this.hide();\n    }\n  }\n\n  ngOnDestroy(): void {\n    if (this.isShown) {\n      this._hide();\n    }\n  }\n\n  hide(): void {\n    if (this.isModalHiding || !this.isShown) {\n      return;\n    }\n\n    if (this.config.closeInterceptor) {\n      this.config.closeInterceptor().then(\n        () => this._hide(),\n        () => undefined);\n\n      return;\n    }\n\n    this._hide();\n  }\n\n  private _hide(): void {\n    this.isModalHiding = true;\n    this._renderer.removeClass(\n      this._element.nativeElement,\n      isBs3() ? CLASS_NAME.IN : CLASS_NAME.SHOW\n    );\n    setTimeout(() => {\n      this.isShown = false;\n      if (\n        document &&\n        document.body &&\n        this.bsModalService?.getModalsCount() === 1\n      ) {\n        this._renderer.removeClass(document.body, CLASS_NAME.OPEN);\n        this._renderer.setStyle(document.body, 'overflow-y', '');\n      }\n      this.bsModalService?.hide(this.config.id);\n      this.isModalHiding = false;\n    }, this.isAnimated ? TRANSITION_DURATIONS.MODAL : 0);\n  }\n}\n","import { Component, ElementRef, OnInit, Renderer2 } from '@angular/core';\n\nimport { CLASS_NAME } from './modal-options.class';\nimport { isBs3, Utils } from 'ngx-bootstrap/utils';\n\n\n/** This component will be added as background layout for modals if enabled */\n@Component({\n  selector: 'bs-modal-backdrop',\n  template: ' ',\n  // eslint-disable-next-line @angular-eslint/no-host-metadata-property\n  host: { class: CLASS_NAME.BACKDROP }\n})\nexport class ModalBackdropComponent implements OnInit {\n  get isAnimated(): boolean {\n    return this._isAnimated;\n  }\n\n  set isAnimated(value: boolean) {\n    this._isAnimated = value;\n  }\n\n  get isShown(): boolean {\n    return this._isShown;\n  }\n\n  set isShown(value: boolean) {\n    this._isShown = value;\n    if (value) {\n      this.renderer.addClass(\n        this.element.nativeElement,\n        `${CLASS_NAME.IN}`\n      );\n    } else {\n      this.renderer.removeClass(\n        this.element.nativeElement,\n        `${CLASS_NAME.IN}`\n      );\n    }\n    if (!isBs3()) {\n      if (value) {\n        this.renderer.addClass(\n          this.element.nativeElement,\n          `${CLASS_NAME.SHOW}`\n        );\n      } else {\n        this.renderer.removeClass(\n          this.element.nativeElement,\n          `${CLASS_NAME.SHOW}`\n        );\n      }\n    }\n  }\n\n  element: ElementRef;\n  renderer: Renderer2;\n\n  protected _isAnimated = false;\n  protected _isShown = false;\n\n  constructor(element: ElementRef, renderer: Renderer2) {\n    this.element = element;\n    this.renderer = renderer;\n  }\n\n  ngOnInit(): void {\n    if (this.isAnimated) {\n      this.renderer.addClass(\n        this.element.nativeElement,\n        `${CLASS_NAME.FADE}`\n      );\n      Utils.reflow(this.element.nativeElement);\n    }\n    this.isShown = true;\n  }\n}\n","// todo: should we support enforce focus in?\n// todo: in original bs there are was a way to prevent modal from showing\n// todo: original modal had resize events\n\nimport {\n  ComponentRef, Directive, ElementRef, EventEmitter, HostListener, Input,\n  OnDestroy, OnInit, Output, Renderer2, ViewContainerRef, Optional, Inject\n} from '@angular/core';\n\nimport { document, window, isBs3, Utils } from 'ngx-bootstrap/utils';\nimport { ModalBackdropComponent } from './modal-backdrop.component';\nimport {\n  CLASS_NAME, DISMISS_REASONS, modalConfigDefaults, ModalOptions, MODAL_CONFIG_DEFAULT_OVERRIDE\n} from './modal-options.class';\nimport { ComponentLoader, ComponentLoaderFactory } from 'ngx-bootstrap/component-loader';\nimport { CloseInterceptorFn } from './models';\n\nconst TRANSITION_DURATION = 300;\nconst BACKDROP_TRANSITION_DURATION = 150;\n\n/** Mark any code with directive to show it's content in modal */\n@Directive({\n  selector: '[bsModal]',\n  exportAs: 'bs-modal'\n})\nexport class ModalDirective implements OnDestroy, OnInit {\n  /** allows to set modal configuration via element property */\n  @Input()\n  set config(conf: ModalOptions) {\n    this._config = this.getConfig(conf);\n  }\n\n  get config(): ModalOptions {\n    return this._config;\n  }\n\n  /** allows to provide a callback to intercept the closure of the modal */\n  @Input() closeInterceptor?: CloseInterceptorFn;\n\n  /** This event fires immediately when the `show` instance method is called. */\n  @Output()\n  onShow: EventEmitter<ModalDirective> = new EventEmitter<ModalDirective>();\n  /** This event is fired when the modal has been made visible to the user\n   * (will wait for CSS transitions to complete)\n   */\n  @Output()\n  onShown: EventEmitter<ModalDirective> = new EventEmitter<ModalDirective>();\n  /** This event is fired immediately when\n   * the hide instance method has been called.\n   */\n  @Output()\n  onHide: EventEmitter<ModalDirective> = new EventEmitter<ModalDirective>();\n  /** This event is fired when the modal has finished being\n   * hidden from the user (will wait for CSS transitions to complete).\n   */\n  @Output()\n  onHidden: EventEmitter<ModalDirective> = new EventEmitter<ModalDirective>();\n\n  /** This field contains last dismiss reason.\n   * Possible values: `backdrop-click`, `esc` and `id: number`\n   * (if modal was closed by direct call of `.hide()`).\n   */\n  dismissReason?: string;\n\n  get isShown(): boolean {\n    return this._isShown;\n  }\n\n  protected _config: ModalOptions;\n  protected _isShown = false;\n\n  protected isBodyOverflowing = false;\n  protected originalBodyPadding = 0;\n  protected scrollbarWidth = 0;\n\n  protected timerHideModal = 0;\n  protected timerRmBackDrop = 0;\n\n  // reference to backdrop component\n  protected backdrop?: ComponentRef<ModalBackdropComponent>;\n  private _backdrop: ComponentLoader<ModalBackdropComponent>;\n\n  private isNested = false;\n  private clickStartedInContent = false;\n\n  constructor(\n    private _element: ElementRef,\n    _viewContainerRef: ViewContainerRef,\n    private _renderer: Renderer2,\n    clf: ComponentLoaderFactory,\n    @Optional() @Inject(MODAL_CONFIG_DEFAULT_OVERRIDE) modalDefaultOption: ModalOptions) {\n    this._backdrop = clf.createLoader<ModalBackdropComponent>(\n      _element,\n      _viewContainerRef,\n      _renderer\n    );\n    this._config = modalDefaultOption || modalConfigDefaults;\n  }\n\n  @HostListener('mousedown', ['$event'])\n  onClickStarted(event: MouseEvent): void {\n    this.clickStartedInContent = event.target !== this._element.nativeElement;\n  }\n\n  @HostListener('mouseup', ['$event'])\n  onClickStop(event: MouseEvent): void {\n    const clickedInBackdrop = event.target === this._element.nativeElement && !this.clickStartedInContent;\n    if (\n      this.config.ignoreBackdropClick ||\n      this.config.backdrop === 'static' ||\n      !clickedInBackdrop\n    ) {\n      this.clickStartedInContent = false;\n\n      return;\n    }\n    this.dismissReason = DISMISS_REASONS.BACKRDOP;\n    this.hide(event);\n  }\n\n  // todo: consider preventing default and stopping propagation\n  @HostListener('keydown.esc', ['$event'])\n  onEsc(event: KeyboardEvent): void {\n    if (!this._isShown) {\n      return;\n    }\n    if (event.keyCode === 27 || event.key === 'Escape') {\n      event.preventDefault();\n    }\n\n    if (this.config.keyboard) {\n      this.dismissReason = DISMISS_REASONS.ESC;\n      this.hide();\n    }\n  }\n\n  ngOnDestroy() {\n    if (this._isShown) {\n      this._isShown = false;\n      this.hideModal();\n      this._backdrop.dispose();\n    }\n  }\n\n  ngOnInit(): void {\n    this._config = this._config || this.getConfig();\n    setTimeout(() => {\n      if (this._config.show) {\n        this.show();\n      }\n    }, 0);\n  }\n\n  /* Public methods */\n\n  /** Allows to manually toggle modal visibility */\n  toggle(): void {\n    return this._isShown ? this.hide() : this.show();\n  }\n\n  /** Allows to manually open modal */\n  show(): void {\n    this.dismissReason = void 0;\n    this.onShow.emit(this);\n    if (this._isShown) {\n      return;\n    }\n    clearTimeout(this.timerHideModal);\n    clearTimeout(this.timerRmBackDrop);\n\n    this._isShown = true;\n\n    this.checkScrollbar();\n    this.setScrollbar();\n\n    if (document && document.body) {\n      if (document.body.classList.contains(CLASS_NAME.OPEN)) {\n        this.isNested = true;\n      } else {\n        this._renderer.addClass(document.body, CLASS_NAME.OPEN);\n        this._renderer.setStyle(document.body, 'overflow-y', 'hidden');\n      }\n    }\n\n    this.showBackdrop(() => {\n      this.showElement();\n    });\n  }\n\n  /** Check if we can close the modal */\n  hide(event?: Event): void {\n    if (!this._isShown) {\n      return;\n    }\n\n    if (event) {\n      event.preventDefault();\n    }\n\n    if (this.config.closeInterceptor) {\n      this.config.closeInterceptor().then(\n        () => this._hide(),\n        () => undefined);\n\n      return;\n    }\n\n    this._hide();\n  }\n\n  /** Private methods @internal */\n\n  /**\n   *  Manually close modal\n   *  @internal\n   */\n  protected _hide(): void {\n    this.onHide.emit(this);\n\n    window.clearTimeout(this.timerHideModal);\n    window.clearTimeout(this.timerRmBackDrop);\n\n    this._isShown = false;\n    this._renderer.removeClass(this._element.nativeElement, CLASS_NAME.IN);\n    if (!isBs3()) {\n      this._renderer.removeClass(this._element.nativeElement, CLASS_NAME.SHOW);\n    }\n    // this._addClassIn = false;\n\n    if (this._config.animated) {\n      this.timerHideModal = window.setTimeout(\n        () => this.hideModal(),\n        TRANSITION_DURATION\n      );\n    } else {\n      this.hideModal();\n    }\n  }\n\n  protected getConfig(config?: ModalOptions): ModalOptions {\n    return Object.assign({}, this._config, config);\n  }\n\n  /**\n   *  Show dialog\n   *  @internal\n   */\n  protected showElement(): void {\n    // todo: replace this with component loader usage\n    if (\n      !this._element.nativeElement.parentNode ||\n      this._element.nativeElement.parentNode.nodeType !== Node.ELEMENT_NODE\n    ) {\n      // don't move modals dom position\n      if (document && document.body) {\n        document.body.appendChild(this._element.nativeElement);\n      }\n    }\n\n    this._renderer.setAttribute(\n      this._element.nativeElement,\n      'aria-hidden',\n      'false'\n    );\n    this._renderer.setAttribute(\n      this._element.nativeElement,\n      'aria-modal',\n      'true'\n    );\n    this._renderer.setStyle(\n      this._element.nativeElement,\n      'display',\n      'block'\n    );\n    this._renderer.setProperty(\n      this._element.nativeElement,\n      'scrollTop',\n      0\n    );\n\n    if (this._config.animated) {\n      Utils.reflow(this._element.nativeElement);\n    }\n\n    // this._addClassIn = true;\n    this._renderer.addClass(this._element.nativeElement, CLASS_NAME.IN);\n    if (!isBs3()) {\n      this._renderer.addClass(this._element.nativeElement, CLASS_NAME.SHOW);\n    }\n\n    const transitionComplete = () => {\n      if (this._config.focus) {\n        this._element.nativeElement.focus();\n      }\n      this.onShown.emit(this);\n    };\n\n    if (this._config.animated) {\n      setTimeout(transitionComplete, TRANSITION_DURATION);\n    } else {\n      transitionComplete();\n    }\n  }\n\n  /** @internal */\n  protected hideModal(): void {\n    this._renderer.setAttribute(\n      this._element.nativeElement,\n      'aria-hidden',\n      'true'\n    );\n    this._renderer.setStyle(\n      this._element.nativeElement,\n      'display',\n      'none'\n    );\n    this.showBackdrop(() => {\n      if (!this.isNested) {\n        if (document && document.body) {\n          this._renderer.removeClass(document.body, CLASS_NAME.OPEN);\n          this._renderer.setStyle(document.body, 'overflow-y', '');\n        }\n        this.resetScrollbar();\n      }\n      this.resetAdjustments();\n      this.focusOtherModal();\n      this.onHidden.emit(this);\n    });\n  }\n\n  // todo: original show was calling a callback when done, but we can use\n  // promise\n  /** @internal */\n  protected showBackdrop(callback?: () => void): void {\n    if (\n      this._isShown &&\n      this.config.backdrop &&\n      (!this.backdrop || !this.backdrop.instance.isShown)\n    ) {\n      this.removeBackdrop();\n      this._backdrop\n        .attach(ModalBackdropComponent)\n        .to('body')\n        .show({ isAnimated: this._config.animated });\n      this.backdrop = this._backdrop._componentRef;\n\n      if (!callback) {\n        return;\n      }\n\n      if (!this._config.animated) {\n        callback();\n\n        return;\n      }\n\n      setTimeout(callback, BACKDROP_TRANSITION_DURATION);\n    } else if (!this._isShown && this.backdrop) {\n      this.backdrop.instance.isShown = false;\n\n      const callbackRemove = () => {\n        this.removeBackdrop();\n        if (callback) {\n          callback();\n        }\n      };\n\n      if (this.backdrop.instance.isAnimated) {\n        this.timerRmBackDrop = window.setTimeout(\n          callbackRemove,\n          BACKDROP_TRANSITION_DURATION\n        );\n      } else {\n        callbackRemove();\n      }\n    } else if (callback) {\n      callback();\n    }\n  }\n\n  /** @internal */\n  protected removeBackdrop(): void {\n    this._backdrop.hide();\n  }\n\n  /** Events tricks */\n\n  // no need for it\n  // protected setEscapeEvent():void {\n  //   if (this._isShown && this._config.keyboard) {\n  //     $(this._element).on(Event.KEYDOWN_DISMISS, (event) => {\n  //       if (event.which === 27) {\n  //         this.hide()\n  //       }\n  //     })\n  //\n  //   } else if (!this._isShown) {\n  //     $(this._element).off(Event.KEYDOWN_DISMISS)\n  //   }\n  // }\n\n  // protected setResizeEvent():void {\n  // console.log(this.renderer.listenGlobal('', Event.RESIZE));\n  // if (this._isShown) {\n  //   $(window).on(Event.RESIZE, $.proxy(this._handleUpdate, this))\n  // } else {\n  //   $(window).off(Event.RESIZE)\n  // }\n  // }\n\n  protected focusOtherModal() {\n    if (this._element.nativeElement.parentElement == null) {\n      return;\n    }\n    const otherOpenedModals = this._element.nativeElement.parentElement.querySelectorAll('.in[bsModal]');\n    if (!otherOpenedModals.length) {\n      return;\n    }\n    otherOpenedModals[otherOpenedModals.length - 1].focus();\n  }\n\n  /** @internal */\n  protected resetAdjustments(): void {\n    this._renderer.setStyle(\n      this._element.nativeElement,\n      'paddingLeft',\n      ''\n    );\n    this._renderer.setStyle(\n      this._element.nativeElement,\n      'paddingRight',\n      ''\n    );\n  }\n\n  /** Scroll bar tricks */\n  /** @internal */\n  protected checkScrollbar(): void {\n    this.isBodyOverflowing = document.body.clientWidth < window.innerWidth;\n    this.scrollbarWidth = this.getScrollbarWidth();\n  }\n\n  protected setScrollbar(): void {\n    if (!document) {\n      return;\n    }\n\n    this.originalBodyPadding = parseInt(\n      window\n        .getComputedStyle(document.body)\n        .getPropertyValue('padding-right') || 0,\n      10\n    );\n\n    if (this.isBodyOverflowing) {\n      document.body.style.paddingRight = `${this.originalBodyPadding +\n        this.scrollbarWidth}px`;\n    }\n  }\n\n  protected resetScrollbar(): void {\n    document.body.style.paddingRight = `${this.originalBodyPadding}px`;\n  }\n\n  // thx d.walsh\n  protected getScrollbarWidth(): number {\n    const scrollDiv = this._renderer.createElement('div');\n    this._renderer.addClass(scrollDiv, CLASS_NAME.SCROLLBAR_MEASURER);\n    this._renderer.appendChild(document.body, scrollDiv);\n    const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n    this._renderer.removeChild(document.body, scrollDiv);\n\n    return scrollbarWidth;\n  }\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    if (typeof b !== \"function\" && b !== null)\r\n        throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, o) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\n/** @deprecated */\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n}\r\n\r\nexport function __spreadArray(to, from) {\r\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\r\n        to[j] = from[i];\r\n    return to;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import {\n  ComponentRef,\n  Injectable,\n  TemplateRef,\n  EventEmitter,\n  Renderer2,\n  RendererFactory2,\n  Inject,\n  Optional\n} from '@angular/core';\n\nimport { ComponentLoader, ComponentLoaderFactory } from 'ngx-bootstrap/component-loader';\nimport { ModalBackdropComponent } from './modal-backdrop.component';\nimport { ModalContainerComponent } from './modal-container.component';\nimport {\n  CLASS_NAME,\n  modalConfigDefaults,\n  ModalOptions,\n  TRANSITION_DURATIONS,\n  MODAL_CONFIG_DEFAULT_OVERRIDE\n} from './modal-options.class';\nimport { BsModalRef } from './bs-modal-ref.service';\n\n@Injectable()\nexport class BsModalService {\n  // constructor props\n  config: ModalOptions;\n\n  onShow = new EventEmitter();\n  onShown = new EventEmitter();\n  onHide = new EventEmitter();\n  onHidden = new EventEmitter();\n\n  protected isBodyOverflowing = false;\n  protected originalBodyPadding = 0;\n\n  protected scrollbarWidth = 0;\n\n  protected backdropRef?: ComponentRef<ModalBackdropComponent>;\n  private _backdropLoader: ComponentLoader<ModalBackdropComponent>;\n  private modalsCount = 0;\n  private lastDismissReason?: string;\n\n  private loaders: ComponentLoader<ModalContainerComponent>[] = [];\n\n  private _renderer: Renderer2;\n\n  constructor(\n    rendererFactory: RendererFactory2,\n    private clf: ComponentLoaderFactory,\n    @Optional() @Inject(MODAL_CONFIG_DEFAULT_OVERRIDE) private modalDefaultOption: ModalOptions) {\n    this._backdropLoader = this.clf.createLoader<ModalBackdropComponent>();\n    this._renderer = rendererFactory.createRenderer(null, null);\n    this.config = modalDefaultOption ?\n      (Object.assign({}, modalConfigDefaults, modalDefaultOption)) :\n      modalConfigDefaults;\n  }\n\n  /** Shows a modal */\n  show<T>(\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    content: string | TemplateRef<any> | { new(...args: any[]): T },\n    config?: ModalOptions<T>\n  ): BsModalRef<T> {\n    this.modalsCount++;\n    this._createLoaders();\n\n    // must be different per every show() call\n    const id = config?.id || (new Date()).getUTCMilliseconds();\n    this.config = this.modalDefaultOption ?\n      Object.assign({}, modalConfigDefaults, this.modalDefaultOption, config) :\n      Object.assign({}, modalConfigDefaults, config);\n    this.config.id = id;\n\n    this._showBackdrop();\n    this.lastDismissReason = void 0;\n\n    return this._showModal<T>(content);\n  }\n\n  hide(id?: number | string) {\n    if (this.modalsCount === 1 || id == null) {\n      this._hideBackdrop();\n      this.resetScrollbar();\n    }\n    this.modalsCount = this.modalsCount >= 1 && id != null ? this.modalsCount - 1 : 0;\n    setTimeout(() => {\n      this._hideModal(id);\n      this.removeLoaders(id);\n    }, this.config.animated ? TRANSITION_DURATIONS.BACKDROP : 0);\n  }\n\n  _showBackdrop(): void {\n    const isBackdropEnabled =\n      this.config.backdrop === true || this.config.backdrop === 'static';\n    const isBackdropInDOM =\n      !this.backdropRef || !this.backdropRef.instance.isShown;\n\n    if (this.modalsCount === 1) {\n      this.removeBackdrop();\n\n      if (isBackdropEnabled && isBackdropInDOM) {\n        this._backdropLoader\n          .attach(ModalBackdropComponent)\n          .to('body')\n          .show({ isAnimated: this.config.animated });\n        this.backdropRef = this._backdropLoader._componentRef;\n      }\n    }\n  }\n\n  _hideBackdrop(): void {\n    if (!this.backdropRef) {\n      return;\n    }\n    this.backdropRef.instance.isShown = false;\n    const duration = this.config.animated ? TRANSITION_DURATIONS.BACKDROP : 0;\n    setTimeout(() => this.removeBackdrop(), duration);\n  }\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  _showModal<T>(content: any): BsModalRef<T> {\n    const modalLoader = this.loaders[this.loaders.length - 1];\n    if (this.config && this.config.providers) {\n      for (const provider of this.config.providers) {\n        modalLoader.provide(provider);\n      }\n    }\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    const bsModalRef = new BsModalRef<any>();\n    const modalContainerRef = modalLoader\n      .provide({ provide: ModalOptions, useValue: this.config })\n      .provide({ provide: BsModalRef, useValue: bsModalRef })\n      .attach(ModalContainerComponent)\n      .to('body');\n    bsModalRef.hide = () => modalContainerRef.instance?.hide();\n    bsModalRef.setClass = (newClass: string) => {\n      if (modalContainerRef.instance) {\n        modalContainerRef.instance.config.class = newClass;\n      }\n    };\n\n    bsModalRef.onHidden = new EventEmitter<unknown>();\n    bsModalRef.onHide = new EventEmitter<unknown>();\n\n    this.copyEvent(modalLoader.onBeforeHide, bsModalRef.onHide);\n    this.copyEvent(modalLoader.onHidden, bsModalRef.onHidden);\n    // call 'show' method after assign setClass in bsModalRef.\n    // it makes modal component's bsModalRef available to call setClass method\n    modalContainerRef.show({\n      content,\n      isAnimated: this.config.animated,\n      initialState: this.config.initialState,\n      bsModalService: this,\n      id: this.config.id\n    });\n\n    if (modalContainerRef.instance) {\n      modalContainerRef.instance.level = this.getModalsCount();\n      bsModalRef.content = modalLoader.getInnerComponent();\n      bsModalRef.id = modalContainerRef.instance.config?.id;\n    }\n\n    return bsModalRef;\n  }\n\n  _hideModal(id?: number | string): void {\n    if (id != null) {\n      const indexToRemove = this.loaders.findIndex(loader => loader.instance?.config.id === id);\n      const modalLoader = this.loaders[indexToRemove];\n      if (modalLoader) {\n        modalLoader.hide(id);\n      }\n    } else {\n      this.loaders.forEach(\n        (loader: ComponentLoader<ModalContainerComponent>) => {\n          if (loader.instance) {\n            loader.hide(loader.instance.config.id);\n          }\n        }\n      );\n    }\n  }\n\n  getModalsCount(): number {\n    return this.modalsCount;\n  }\n\n  setDismissReason(reason: string) {\n    this.lastDismissReason = reason;\n  }\n\n  removeBackdrop(): void {\n    this._renderer.removeClass(document.body, CLASS_NAME.OPEN);\n    this._renderer.setStyle(document.body, 'overflow-y', '');\n    this._backdropLoader.hide();\n    this.backdropRef = void 0;\n  }\n\n  /** Checks if the body is overflowing and sets scrollbar width */\n  /** @internal */\n  checkScrollbar(): void {\n    this.isBodyOverflowing = document.body.clientWidth < window.innerWidth;\n    this.scrollbarWidth = this.getScrollbarWidth();\n  }\n\n  setScrollbar(): void {\n    if (!document) {\n      return;\n    }\n\n    this.originalBodyPadding = parseInt(\n      window\n        .getComputedStyle(document.body)\n        .getPropertyValue('padding-right') || '0',\n      10\n    );\n\n    if (this.isBodyOverflowing) {\n      document.body.style.paddingRight = `${this.originalBodyPadding +\n        this.scrollbarWidth}px`;\n    }\n  }\n\n  private resetScrollbar(): void {\n    document.body.style.paddingRight = `${this.originalBodyPadding}px`;\n  }\n\n  // thx d.walsh\n  private getScrollbarWidth(): number {\n    const scrollDiv = this._renderer.createElement('div');\n    this._renderer.addClass(scrollDiv, CLASS_NAME.SCROLLBAR_MEASURER);\n    this._renderer.appendChild(document.body, scrollDiv);\n    const scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth;\n    this._renderer.removeChild(document.body, scrollDiv);\n\n    return scrollbarWidth;\n  }\n\n  private _createLoaders(): void {\n    const loader = this.clf.createLoader<ModalContainerComponent>();\n    this.copyEvent(loader.onBeforeShow, this.onShow);\n    this.copyEvent(loader.onShown, this.onShown);\n    this.copyEvent(loader.onBeforeHide, this.onHide);\n    this.copyEvent(loader.onHidden, this.onHidden);\n    this.loaders.push(loader);\n  }\n\n  private removeLoaders(id?: number | string): void {\n    if (id != null) {\n      const indexToRemove = this.loaders.findIndex(loader => loader.instance?.config.id === id);\n      if (indexToRemove >= 0) {\n        this.loaders.splice(indexToRemove, 1);\n        this.loaders.forEach(\n          (loader: ComponentLoader<ModalContainerComponent>, i: number) => {\n            if (loader.instance) {\n              loader.instance.level = i + 1;\n            }\n          }\n        );\n      }\n    } else {\n      this.loaders.splice(0, this.loaders.length);\n    }\n  }\n\n  private copyEvent(from: EventEmitter<unknown>, to: EventEmitter<unknown>) {\n    from.subscribe((data) => {\n      to.emit(this.lastDismissReason || data);\n    });\n  }\n}\n","import { NgModule, ModuleWithProviders } from '@angular/core';\n\nimport { PositioningService } from 'ngx-bootstrap/positioning';\nimport { ComponentLoaderFactory } from 'ngx-bootstrap/component-loader';\nimport { FocusTrapModule } from 'ngx-bootstrap/focus-trap';\n\nimport { ModalBackdropComponent } from './modal-backdrop.component';\nimport { ModalDirective } from './modal.directive';\nimport { ModalContainerComponent } from './modal-container.component';\nimport { BsModalService } from './bs-modal.service';\n\nexport const focusTrapModule = FocusTrapModule.forRoot();\n\n@NgModule({\n  imports: [FocusTrapModule],\n  declarations: [\n    ModalBackdropComponent,\n    ModalDirective,\n    ModalContainerComponent\n  ],\n  exports: [ModalBackdropComponent, ModalDirective],\n  entryComponents: [ModalBackdropComponent, ModalContainerComponent]\n})\nexport class ModalModule {\n  static forRoot(): ModuleWithProviders<ModalModule> {\n    return {\n      ngModule: ModalModule,\n      providers: [BsModalService, ComponentLoaderFactory, PositioningService]\n    };\n  }\n  static forChild(): ModuleWithProviders<ModalModule> {\n    return {\n      ngModule: ModalModule,\n      providers: [BsModalService, ComponentLoaderFactory, PositioningService]\n    };\n  }\n}\n"]}