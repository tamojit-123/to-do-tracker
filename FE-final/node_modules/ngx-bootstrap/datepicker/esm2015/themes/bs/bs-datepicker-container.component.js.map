{"version":3,"file":"bs-datepicker-container.component.js","sourceRoot":"","sources":["../../../../../../src/datepicker/themes/bs/bs-datepicker-container.component.ts"],"names":[],"mappings":"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","sourcesContent":["import { Component, ElementRef, EventEmitter, OnDestroy, OnInit, Renderer2 } from '@angular/core';\n\nimport { take } from 'rxjs/operators';\nimport { Subscription } from 'rxjs';\n\nimport { getFullYear, getMonth } from 'ngx-bootstrap/chronos';\nimport { PositioningService } from 'ngx-bootstrap/positioning';\n\nimport { datepickerAnimation } from '../../datepicker-animations';\nimport { BsDatepickerAbstractComponent } from '../../base/bs-datepicker-container';\nimport { BsDatepickerConfig } from '../../bs-datepicker.config';\nimport { CalendarCellViewModel, DayViewModel } from '../../models';\nimport { BsDatepickerActions } from '../../reducer/bs-datepicker.actions';\nimport { BsDatepickerEffects } from '../../reducer/bs-datepicker.effects';\nimport { BsDatepickerStore } from '../../reducer/bs-datepicker.store';\n\n@Component({\n  selector: 'bs-datepicker-container',\n  providers: [BsDatepickerStore, BsDatepickerEffects],\n  templateUrl: './bs-datepicker-view.html',\n  host: {\n    class: 'bottom',\n    '(click)': '_stopPropagation($event)',\n    role: 'dialog',\n    'aria-label': 'calendar'\n  },\n  animations: [datepickerAnimation]\n})\nexport class BsDatepickerContainerComponent extends BsDatepickerAbstractComponent\n  implements OnInit, OnDestroy {\n\n  set value(value: Date|undefined) {\n    this._effects?.setValue(value);\n  }\n\n  valueChange: EventEmitter<Date> = new EventEmitter<Date>();\n  animationState = 'void';\n\n  _subs: Subscription[] = [];\n  constructor(\n    _renderer: Renderer2,\n    private _config: BsDatepickerConfig,\n    private _store: BsDatepickerStore,\n    private _element: ElementRef,\n    private _actions: BsDatepickerActions,\n    _effects: BsDatepickerEffects,\n    private _positionService: PositioningService\n  ) {\n    super();\n    this._effects = _effects;\n\n    _renderer.setStyle(_element.nativeElement, 'display', 'block');\n    _renderer.setStyle(_element.nativeElement, 'position', 'absolute');\n  }\n\n  ngOnInit(): void {\n    this._positionService.setOptions({\n      modifiers: { flip: { enabled: this._config.adaptivePosition } },\n      allowedPositions: ['top', 'bottom']\n    });\n\n    this._positionService.event$?.pipe(take(1))\n      .subscribe(() => {\n        this._positionService.disable();\n\n        if (this._config.isAnimated) {\n          this.animationState = this.isTopPosition ? 'animated-up' : 'animated-down';\n\n          return;\n        }\n\n        this.animationState = 'unanimated';\n      });\n\n    this.isOtherMonthsActive = this._config.selectFromOtherMonth;\n    this.containerClass = this._config.containerClass;\n    this.showTodayBtn = this._config.showTodayButton;\n    this.todayBtnLbl = this._config.todayButtonLabel;\n    this.todayPos = this._config.todayPosition;\n    this.showClearBtn = this._config.showClearButton;\n    this.clearBtnLbl = this._config.clearButtonLabel;\n    this.clearPos = this._config.clearPosition;\n    this.customRangeBtnLbl = this._config.customRangeButtonLabel;\n    this._effects?.init(this._store)\n      // intial state options\n      .setOptions(this._config)\n      // data binding view --> model\n      .setBindings(this)\n      // set event handlers\n      .setEventHandlers(this)\n      .registerDatepickerSideEffects();\n\n    // todo: move it somewhere else\n    // on selected date change\n    this._subs.push(\n      this._store\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        .select((state: any) => state.selectedDate)\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        .subscribe((date: any) => this.valueChange.emit(date))\n    );\n\n    this._store.dispatch(this._actions.changeViewMode(this._config.startView));\n  }\n\n  get isTopPosition(): boolean {\n    return this._element.nativeElement.classList.contains('top');\n  }\n\n  positionServiceEnable(): void {\n    this._positionService.enable();\n  }\n\n  daySelectHandler(day: DayViewModel): void {\n    if (!day) {\n     return;\n    }\n\n    const isDisabled = this.isOtherMonthsActive ? day.isDisabled : (day.isOtherMonth || day.isDisabled);\n\n    if (isDisabled) {\n      return;\n    }\n\n    this._store.dispatch(this._actions.select(day.date));\n  }\n\n  monthSelectHandler(day: CalendarCellViewModel): void {\n    if (!day || day.isDisabled) {\n      return;\n    }\n\n    this._store.dispatch(\n      this._actions.navigateTo({\n        unit: {\n          month: getMonth(day.date),\n          year: getFullYear(day.date)\n        },\n        viewMode: 'day'\n      })\n    );\n  }\n\n  yearSelectHandler(day: CalendarCellViewModel): void {\n    if (!day || day.isDisabled) {\n      return;\n    }\n\n    this._store.dispatch(\n      this._actions.navigateTo({\n        unit: {\n          year: getFullYear(day.date)\n        },\n        viewMode: 'month'\n      })\n    );\n  }\n\n  setToday(): void {\n    this._store.dispatch(this._actions.select(new Date()));\n  }\n\n  clearDate(): void {\n    this._store.dispatch(this._actions.select(undefined));\n  }\n\n  ngOnDestroy(): void {\n    for (const sub of this._subs) {\n      sub.unsubscribe();\n    }\n    this._effects?.destroy();\n  }\n}\n"]}